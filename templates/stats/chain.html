{% extends 'base.html' %}

{% block title %}
Tornium - Chain Generator
{% endblock %}

{% block content %}
{% include 'navbar.html' %}
{% include 'stats/navbar.html' %}

<div class="px-3 py-3">
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Chain List Generator (BETA)</h5>
            <p class="card-text">
                This utility returns a chain list based on fair fight with a default of 3x FF (this can be
                adjusted if you're on war perks, xan debuff, et al). Move the slider below to maximize the respect
                earned and minimize the potential health lost. It is not recommended to move the slider above 1x
                since at that point, targets will be as strong or stronger than you are.
            </p>
            <p class="card-text">
                Note: Please minimize the number of chain list generations per minute since this utility makes a call to the
                Torn API for each user.
            </p>

            <div class="px-2 py-2">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Chain List Generator Options</h5>
                        <div class="col-sm-12 col-md-8 col-lg-4 my-2">
                            <form class="form-floating" id="chainform">
                                <label for="chainff" class="form-label">
                                    Chain List Fair Fight
                                    <span class="badge rounded-pill bg-danger">
                                        <span id="strength">3</span>
                                    </span>
                                </label>
                                <input type="range" class="form-range mb-3" id="chainff" min="1" max="3" step="0.01" Value="3" onInput="$('#strength').html($(this).val())">

                                <div class="form-text">
                                    Adjust the slider above in order to increase or decrease the difficulty of the target.
                                    As the slider moves to the left, the difficulty decreases; as the slider moves to the
                                    right, the difficulty increases. A value of around 0.75 will give maximum fair fight
                                    and a value of around 1 will give a list of users with similar stats.
                                </div>

                                <button type="submit" class="btn btn-primary my-3">Generate</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <div class="px-2 py-2">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Chain List Generator Results</h5>
                        
                        <table id="targets-table" class="table table-striped table-bordered responsive" style="overflow-x: inherit">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Level</th>
                                    <th>Estimated Fair Fight</th>
                                    <th>Estimated Respect</th>
                                    <th>Time Added</th>
                                    <th>Last Action</th>
                                </tr>
                            </thead>

                            <tbody id="targets-table-body">

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="modal">
</div>

<script src="/static/stats/list.js" data-key="{{ current_user.key }}"></script>
{% endblock %}
